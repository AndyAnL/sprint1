apiVersion: kubeadm.k8s.io/v1beta4
kind: InitConfiguration
nodeRegistration:
  criSocket: "unix:///var/run/containerd/containerd.sock"
  kubeletExtraArgs:
    - name: "cgroup-driver"
      value: "systemd"
    - name: "fail-swap-on"
      value: "false"
  name: "{{ ansible_hostname }}"
localAPIEndpoint:
  advertiseAddress: "{{ master_ip }}"
  bindPort: 6443
---
apiVersion: kubeadm.k8s.io/v1beta4
kind: ClusterConfiguration
networking:
  podSubnet: "10.244.0.0/16"
  serviceSubnet: "10.96.0.0/12"
controllerManager: {}
scheduler: {}
apiServer:
  certSANs:
    - "{{ ansible_host }}"
imageRepository: "registry.k8s.io"
kubernetesVersion: "1.33.4"